# Практическая работа №3 Вариант 12

# Язык ассемблера УВМ

## Общий синтаксис
- Каждая инструкция на отдельной строке
- Регистр не имеет значения (команды в верхнем или нижнем регистре)
- Комментарии начинаются с `;`
- Числа: десятичные (42) или шестнадцатеричные (0x2A)
- Константы обозначаются префиксом `#`

## Инструкции

### Загрузка константы
LOAD #<значение>

Загружает константу на вершину стека.

### Чтение из памяти
LOAD

Снимает адрес с вершины стека, читает значение из памяти по этому адресу и помещает его на стек.

### Запись в память
STORE <адрес>

Снимает значение с вершины стека и записывает его в память по указанному адресу.

### Сложение

Снимает два значения со стека:
1. Адрес первого операнда в памяти
2. Второй операнд (значение)
Складывает значение из памяти по указанному адресу со вторым операндом и помещает результат на стек.

## Пример программы
```asm
START:
    LOAD #155      ; Загрузка константы
    STORE 1000     ; Запись в память
    
    LOAD #1000     ; Загрузка адреса
    LOAD           ; Чтение из памяти
    
    LOAD #200      ; Подготовка к сложению
    LOAD #50
    ADD            ; Сложение
    
END:
```
## Формат команд в памяти
Все команды занимают 3 байта:

Биты 0-2: поле A (код операции)

Биты 3-19: поле B (операнд)

Коды операций:

A=1: LOAD_CONST

A=3: ADD

A=4: STORE

A=7: LOAD_MEM

## Работа со стеком
УВМ использует стековую архитектуру:

LOAD #const и LOAD (чтение) кладут значения на стек

STORE и ADD снимают значения со стека

Стек растет вверх (новые элементы добавляются в конец)

## Ограничения
Объем памяти данных: 65536 ячеек

Размер стека: ограничен только объемом памяти

Все значения целочисленные

Нет операций вычитания, умножения, деления

Нет условных переходов и циклов в базовой спецификации

**Примеры команд для запуска:**

```bash
# Проверить тесты из спецификации
python assembler.py --test-spec

# Скомпилировать тестовую программу с выводом промежуточного представления
python assembler.py test.asm output.bin --test

# Просто скомпилировать
python assembler.py test.asm output.bin

# Тест копирования массива
python interpreter.py --test-copy

# Тест сложения
python interpreter.py --test-add

# Тест сложения вектора
python interpreter.py --test-vector

# Запуск произвольной программы
python assembler.py vector_sum.asm vector.bin
python interpreter.py vector.bin result.csv 95 210
